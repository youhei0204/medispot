
# README
READMEをお読みいただきありがとうございます。  
こちらは瞑想スポット検索Webサービス【MediSpot】の説明書になります。  
以下ではアプリの情報に加え、制作の背景や意識したポイントついても記載しております。  
是非、ご一読下さい。

## アプリケーション名
MediSpot

## サービスURL
https://medispot.herokuapp.com/

## バージョン情報
・ruby  v2.6.8  
・rails v5.2.2 

## アプリケーション説明
MediSpotは、都内で瞑想・ヨガの体験ができるスポットを、  
ユーザーの体験レビューをもとに検索できるWebサービスです。  
  
そもそも「瞑想」とは何なのか？  
瞑想スポットの前に、そんな疑問を持たれる方も多いかと思います。  
瞑想には種類がいくつもありますが、気になるのはそれらの効果です。  
そのため本サービスでは、エリアや施設名だけでなく、体験レビューを元にしたスポット検索を可能にしました。    
検索を通して、「瞑想でこんな効果が得られるんだ」といった発見ができるようになっています。  
    
また、レビューの数と5段階評価の平均値からおすすめスポットを算出しており、  
いま話題になっているスポットをご覧いただけます。  

## どうして作ったのか
瞑想は本やYoutuberの方々の影響で、日本でも徐々に広がっているように感じます。  
私も半年ほど前にあるきっかけで瞑想を知り、いつの間にか習慣として無くてはならない存在になりました。  
本サービスはPortfolio制作が主目的ですが、せっかくなら私もサービスを通して、  
瞑想の手軽さやその効果を広めたい思い、今回の制作に至りました。

私は毎朝のルーティンに、5-15分ほどの瞑想を取り入れています。  
瞑想と言っても座ってジッとしているだけですが、何もしない時間は意外と大事です。
  
ジッとしていると、心の中で色んな思考が浮かんできます。  
日によっては退屈でしんどかったり、他の作業のことを考えたりしますが、  
それがそのまま、その朝の心の状態を表しています。  
客観的に思考を眺める事で、思考に執着している自分に気づき、手放すことで、  
過去や未来ではなく、今に意識を向けることができます。  
それにより小さな事に感謝の気持ちが生まれる、アンテナが敏感になる、幸福感が高まるなどの変化が得られます。  
(私個人の意見だけでなく、一般的に瞑想効果として言われていることです。)  
  
とはいえ瞑想の効果を得るには、毎日行って習慣化することが大切です。    
場所を選ばない手軽さが瞑想の良い点ですが、やはり始めるきっかけが欲しいところです。  
本サービスを通して素敵な瞑想体験に出会い、習慣化の助けになればとても嬉しく思います。
  
MediSpotは広くリリースするにはまだまだ機能不足ですが、  
徐々に機能拡充をしつつ、瞑想を始めるきっかけづくりができるサービスを目指します。
  
  
## アプリ機能一覧
#### ・ユーザー登録/編集機能 (+プロフィール画像登録/編集)  
#### ・ログイン/ログアウト機能  
#### ・ゲストログイン機能  
#### ・瞑想スポットのレビュー投稿/編集機能 (+画像複数登録/編集)  
#### ・レビューのライク機能  
#### ・スポットのお気に入り機能  
#### ・スポット検索機能  
#### ・新着通知機能  
#### ・話題のスポット表示機能  
#### ・最新レビュー表示機能  
...続々追加予定  


## ER図
![ER図](https://github.com/youhei0204/medispot/blob/images/er.png)

## 制作に当たって意識したこと

### ・issueから始まる開発  
本サービスは個人開発で制作していますが、チーム開発を意識して、  
issueにて開発記録(機能仕様、作業内容、バグなど)を細かく残しています。  
開発者自身の話になりますが、私は前職のSE時代ではRedmineにて、チケット駆動開発(TiDD)のプロジェクトに従事していました。  
(TiDDは、新規機能開発、改修、バグなど、アプリ開発に現れる作業を全てチケットに起票してから開発するという手法です)  
当時は中国のチームと共同開発していたこともあり、言葉や距離的な問題から設計段階での認識齟齬防止に苦労した思い出があります。
そのような事情からチケットの欠かせない現場でしたが、小さなバグでもチケット起票することで  
後々のトラブル防止に大きく貢献してくれた経験から、多少面倒ながらも私はこの習慣を大切にしています。  
今回はgit hubのissueを使って、記録が残り振り返りやすいサービス制作を心がけました。   
   
 <参考>  
[[issue #19] レビュー新規作成でスポットを指定するよう機能改修](https://github.com/youhei0204/medispot/issues/19)  
[[issue #34] スポット検索機能を追加](https://github.com/youhei0204/medispot/issues/34)  
[[issue #43] ホームページに最新レビューとおすすめスポットを表示](https://github.com/youhei0204/medispot/issues/43)  
[[issue #69] 新着通知機能を追加](https://github.com/youhei0204/medispot/issues/69)

### ・Google Maps Platform(旧: Google Maps API)を活用したスポット管理
本サービスでは、スポットごとにレビューを集計しています。  
集計の過程でスポットを一意に判別する必要があるため、今回はGoogle Maps PlatformのPlaceIDを採用しました。  
(PlaceID: Google Maps上で建物や店舗など「場所」に付与された一意のID)  
ユーザーがスポットを直接入力するのではなく、Google Mapの検索結果から選択することで、  
PlaceIDによるスポットの一意性確保に加え、存在しないスポットや誤った情報の登録などを未然に防げるような設計となっています。
  
また、スポット新規登録の元データにMap検索結果を内部で保持したものを使用することで、  
検索結果のSPOT情報がブラウザ上で意図的に変更されても、DBに反映されない設計にしました。  
これにより、悪意あるユーザーによって誤った情報が登録されることを防いでいます。  

### ・Amazon S3の活用  
Heroku(本番環境)では、アップロードした画像が一定時間経過後に削除されるため、  
画像の保存にクラウドストレージとしてAmazon S3を使用しています。　　

### ・テストを重視した開発(Rspec, Rubocop Airbnb)
Rspecにて単体テスト、結合テストを実装しました。  
予めテストを網羅しておくことで、新規機能追加や細かな仕様変更の際に、  
動作不良にすぐに気づける状態を維持しながら開発することを心掛けました。  
また誰でも読みやすく、コーディング規約に沿ったコードを書きたかったため、  
Rubocopを導入してコード品質の担保に努めました。  
なお設定作業の省略のため、Airbnbの開発で使用されているRubocop Airbnbを導入しました。  
      
※開発全体を通してテスト駆動開発を意識しましたが、  
新しく学んだ知識を活用しつつ設計段階でテストを書くことが困難な時があり、  
機能実装後にテストを修正することが何度かありました。  
こちらは今後の課題としています。　　

### ・テストとデプロイの自動化(CircleCI)  
作業の効率化に加え、commit前にテスト実施を失念してしまった場合に備え、
push後に自動テスト、自動デプロイを実施するようにCircleCIを導入・設定しました。  
(もちろん、テスト失敗時はデプロイしません！)

### ・bootstrapを使わずに開発
今回のサービス開発に先駆け、ruby on railsだけでなくhtmlとcssも基礎から学習したので、
本サービスではbootstrapを導入せずにcssを1から書いてデザインしています。

### ・情報漏洩の防止
Amazon S3のバケット情報、Google APIキー、認証用メールのパスワードなど、
漏洩すべきでない情報は直書きを避け、環境変数に格納するよう徹底しました。
　　　　　　
  
## 最後に
最後までお読み頂きありがとうございます。  
MediSpotはこれからも機能拡充予定です！  
もし宜しければ、サービスを覗いてみてください。  
お問い合わせ等ございましたら、以下のメール宛にお願い致します。  
info.medispot@gmail.com

#### 瞑想スポット検索Webサービス【MediSpot】
https://medispot.herokuapp.com/
